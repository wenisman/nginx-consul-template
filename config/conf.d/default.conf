
    
	upstream consul { 
	 server 10.134.16.112:8300 max_fails=3 fail_timeout=60 weight=1; 
	 server 10.134.24.245:8300 max_fails=3 fail_timeout=60 weight=1; 
	 server 10.134.24.67:8300 max_fails=3 fail_timeout=60 weight=1; 
	
	}
	upstream consul-8301 { 
	 server 10.134.16.133:8301 max_fails=3 fail_timeout=60 weight=1; 
	 server 10.134.16.133:8301 max_fails=3 fail_timeout=60 weight=1; 
	 server 10.134.16.182:8301 max_fails=3 fail_timeout=60 weight=1; 
	 server 10.134.16.182:8301 max_fails=3 fail_timeout=60 weight=1; 
	 server 10.134.24.160:8301 max_fails=3 fail_timeout=60 weight=1; 
	 server 10.134.24.160:8301 max_fails=3 fail_timeout=60 weight=1; 
	 server 10.134.24.97:8301 max_fails=3 fail_timeout=60 weight=1; 
	 server 10.134.24.97:8301 max_fails=3 fail_timeout=60 weight=1; 
	
	}
	upstream consul-8400 { 
	 server 10.134.16.133:8400 max_fails=3 fail_timeout=60 weight=1; 
	 server 10.134.16.182:8400 max_fails=3 fail_timeout=60 weight=1; 
	 server 10.134.24.160:8400 max_fails=3 fail_timeout=60 weight=1; 
	 server 10.134.24.97:8400 max_fails=3 fail_timeout=60 weight=1; 
	
	}
	upstream consul-8500 { 
	 server 10.134.16.133:8500 max_fails=3 fail_timeout=60 weight=1; 
	 server 10.134.16.182:8500 max_fails=3 fail_timeout=60 weight=1; 
	 server 10.134.24.160:8500 max_fails=3 fail_timeout=60 weight=1; 
	 server 10.134.24.97:8500 max_fails=3 fail_timeout=60 weight=1; 
	
	}
	upstream kafka { 
	 server 10.134.16.133:9092 max_fails=3 fail_timeout=60 weight=1; 
	
	}
	upstream platform-api-gateway { 
	 server 10.134.16.182:33790 max_fails=3 fail_timeout=60 weight=1; 
	
	}
	upstream schema-registry { 
	 server 10.134.16.133:8081 max_fails=3 fail_timeout=60 weight=1; 
	
	}
	upstream super-search { 
	 server 10.134.16.104:80 max_fails=3 fail_timeout=60 weight=1; 
	 server 10.134.16.158:80 max_fails=3 fail_timeout=60 weight=1; 
	 server 10.134.24.171:80 max_fails=3 fail_timeout=60 weight=1; 
	
	}
	upstream tempest-bet-bridge { 
	server 127.0.0.1:65535; # force a 502 
	}
	upstream tempest-bet-broker { 
	 server 10.134.24.97:32770 max_fails=3 fail_timeout=60 weight=1; 
	
	}
	upstream zookeeper-2181 { 
	 server 10.134.16.133:2181 max_fails=3 fail_timeout=60 weight=1; 
	
	}
	upstream zookeeper-2888 { 
	 server 10.134.16.133:2888 max_fails=3 fail_timeout=60 weight=1; 
	
	}
	upstream zookeeper-3888 { 
	 server 10.134.16.133:3888 max_fails=3 fail_timeout=60 weight=1; 
	
	}

	server {
		listen 80;
		
		
		location /consul {
			proxy_pass http://consul;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header Host $host;
			proxy_set_header X-Real-IP $remote_addr;

		}
		location /consul-8301 {
			proxy_pass http://consul-8301;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header Host $host;
			proxy_set_header X-Real-IP $remote_addr;

		}
		location /consul-8400 {
			proxy_pass http://consul-8400;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header Host $host;
			proxy_set_header X-Real-IP $remote_addr;

		}
		location /consul-8500 {
			proxy_pass http://consul-8500;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header Host $host;
			proxy_set_header X-Real-IP $remote_addr;

		}
		location /kafka {
			proxy_pass http://kafka;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header Host $host;
			proxy_set_header X-Real-IP $remote_addr;

		}
		location /platform-api-gateway {
			proxy_pass http://platform-api-gateway;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header Host $host;
			proxy_set_header X-Real-IP $remote_addr;

		}
		location /schema-registry {
			proxy_pass http://schema-registry;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header Host $host;
			proxy_set_header X-Real-IP $remote_addr;

		}
		location /super-search {
			proxy_pass http://super-search;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header Host $host;
			proxy_set_header X-Real-IP $remote_addr;

		}
		location /tempest-bet-bridge {
			proxy_pass http://tempest-bet-bridge;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header Host $host;
			proxy_set_header X-Real-IP $remote_addr;

		}
		location /tempest-bet-broker {
			proxy_pass http://tempest-bet-broker;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header Host $host;
			proxy_set_header X-Real-IP $remote_addr;

		}
		location /zookeeper-2181 {
			proxy_pass http://zookeeper-2181;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header Host $host;
			proxy_set_header X-Real-IP $remote_addr;

		}
		location /zookeeper-2888 {
			proxy_pass http://zookeeper-2888;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header Host $host;
			proxy_set_header X-Real-IP $remote_addr;

		}
		location /zookeeper-3888 {
			proxy_pass http://zookeeper-3888;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header Host $host;
			proxy_set_header X-Real-IP $remote_addr;

		}
	}
